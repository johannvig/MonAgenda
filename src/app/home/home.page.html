<app-home-header
  (toggleDaltonism)="toggleDaltonismFromHeader()"
  (openSettings)="openSettings()"
  (showNotifications)="showFakeNotif()"
></app-home-header>

<ion-content class="bg-gray">
  <ion-grid>
    <div class="layout-row" #layoutRow>

      <!-- COLONNE GAUCHE : EMPLOI DU TEMPS -->
      <div class="calendar-col">
        <app-calendar-header
          [currentWeek]="currentWeek"
          (prevWeek)="prevWeek()"
          (nextWeek)="nextWeek()"
          (goToday)="goToday()"
        ></app-calendar-header>

        <div class="card-white">
          <full-calendar #myCalendar [options]="calendarOptions"></full-calendar>
        </div>
      </div>

      <div
        class="col-resizer"
        role="separator"
        aria-label="Redimensionner les colonnes"
        tabindex="0"
        (pointerdown)="startResize($event)"
        (mousedown)="startResize($event)"
        (touchstart)="startResize($event)"
      ></div>

      <!-- COLONNE DROITE : PANNEAU -->
      <div class="side-col">
        <app-view-switch
          [viewMode]="viewMode"
          (viewModeChange)="onViewModeChange($event)"
          [selectedDate]="selectedDate"
          (dateChange)="changeDate($event)"
        ></app-view-switch>

        <app-student-panel
          *ngIf="viewMode === 'student'"
          class="panel-spacing"
          [courses]="courses"
          (openSettings)="openSettings()"
          (checkAll)="checkAllCourses()"
          (uncheckAll)="uncheckAllCourses()"
          (courseToggle)="onCourseToggle($event)"
        ></app-student-panel>

        <app-room-panel
          *ngIf="viewMode === 'room'"
          class="panel-spacing"
          [selectedRoom]="selectedRoom"
          [roomQuery]="roomQuery"
          [filteredRooms]="filteredRooms"
          (roomQueryChange)="roomQuery = $event"
          (filterRooms)="filterRooms()"
          (selectRoom)="selectRoom($event)"
        ></app-room-panel>

        <app-teacher-panel
          *ngIf="viewMode === 'teacher'"
          class="panel-spacing"
          [selectedTeacher]="selectedTeacher"
          [teacherQuery]="teacherQuery"
          [filteredTeachers]="filteredTeachers"
          (teacherQueryChange)="teacherQuery = $event"
          (filterTeachers)="filterTeachers()"
          (selectTeacher)="selectTeacher($event)"
        ></app-teacher-panel>
      </div>

    </div>
  </ion-grid>
</ion-content>
